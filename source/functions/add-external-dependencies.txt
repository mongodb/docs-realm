=========================
Add External Dependencies
=========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

You can upload JavaScript modules from the npm registry into your {+app+}
and use the uploaded :ref:`external dependencies
<external-dependencies>` in your Functions. This allows your application to
depend upon external libraries and reuse code.

There are currently two ways to use dependencies in your {+app+}:

- :ref:`Specify the npm packages you want to use <specify-npm-packages>`
- :ref:`Upload a zipped node_modules folder (legacy)<upload-zipped-node-modules>`

.. _specify-npm-packages:

Specify npm Packages
--------------------

You can specify npm packages to use in your {+service-short+} Functions and 
the {+backend+} imports them. You can do this with the {+ui+} or {+cli+}. 

.. TODO(Ben): add steps for ui and cli

.. tabs::

   .. tab:: UI
      :tabid: ui 

      hola mundo

      .. include:: /includes/steps/add-external-dependencies-ui.rst

   .. tab:: CLI
      :tabid: cli

      hello world

      .. include:: /includes/steps/add-external-dependencies-cli.rst

.. _upload-zipped-node-modules:

Upload Zipped node_modules
--------------------------

You must first upload an archive of an npm
``node_modules`` folder. {+service+} automatically transpiles uploaded modules to 
ES5 and supports most built-in modules. You can :doc:`import an uploaded module
</functions/import-external-dependencies>` in any {+service-short+} Function.

You can see a list of uploaded packages on the :guilabel:`Functions` screen of
the {+ui+} under the :guilabel:`Dependencies` tab.

.. important:: External Dependency Size Constraints

   Uploaded ``node_modules`` archive files are subject to a ``10MB`` size cap.

.. include:: /includes/steps/upload-external-dependencies.rst

Summary
-------

- Dependencies can be used in {+service-short+} Functions
- You can use external dependencies by:

  - Pushing a ``package.json`` including dependencies using the {+cli+}.
  - Selecting packages to be installed with the {+ui+}. 
  - Pushing a zip file of dependencies with the {+cli+}.
  - Uploading a zip file of dependencies through the {+ui+}. 

Next Steps
----------

- Once you add your dependencies to {+backend+}, you can :doc:`import external dependencies
  </functions/import-external-dependencies>` in a {+service-short+} Function.
