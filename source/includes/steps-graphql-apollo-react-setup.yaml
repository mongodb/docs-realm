title: Install Dependencies
ref: install-dependencies
content: |
  As in any MongoDB Realm project, you'll need to install the :npm:`Realm Web
  SDK <realm-web>` to authenticate users and requests.

  .. code-block:: shell
     
     npm install realm-web

  Apollo bundles the core components that you need to create a client in a
  package called :npm:`@apollo/client <package/@apollo/client>`. It also
  requires the :npm:`graphql <package/graphql>` package to parse GraphQL
  queries.

  .. code-block:: shell
     
     npm install @apollo/client graphql
---
title: Create an Apollo GraphQL Client
ref: create-an-apollo-graph-ql-client
content: |
  Create a new :apollo:`ApolloClient <docs/react/api/core/ApolloClient>` object
  that points to your Realm app's GraphQL API endpoint. You generate the
  endpoint URL based on your Realm App ID or find it on the GraphQL page of the
  Realm UI.

  .. literalinclude:: /examples/generated/web/apollo-graphql.test.codeblock.create-apollo-client.jsx
     :language: javascript
---
title: Set Up User Authentication
ref: set-up-user-authentication
content: |
  The ``ApolloClient`` is configured to send requests to your app. However, all
  Realm GraphQL requests must include a valid user access token to authenticate
  requests, so right now any operations sent from Apollo will fail.

  To authenticate requests, you need to add an :doc:`Authorization header
  </graphql/authenticate>` with a valid Realm user access token to each GraphQL
  request.

  You can authenticate a user and get their access token with the :ref:`Realm
  Web SDK <web-intro>`. The Apollo ``HttpLink`` object allows you to add custom
  headers to every request by defining a custom ``fetch`` function.

  .. literalinclude:: /examples/generated/web/apollo-graphql.test.codeblock.set-up-user-auth.jsx
     :language: javascript
     :emphasize-lines: 17, 27-31

---
title: Add the Apollo Client to Your App
ref: add-the-apollo-client-to-your-app
content: |
  The Apollo ``client`` object is now configured to send authenticated GraphQL
  requests to your MongoDB Realm app. All that's left to do is make it available
  to the rest of your React application.

  The ``@apollo/client`` package exports an ``ApolloProvider`` component that
  makes the ``client`` available to any Apollo hooks that you call from child
  components. Wrap your app in an ``ApolloProvider`` and pass the ``client``
  object to the provider.

  .. literalinclude:: /examples/generated/web/apollo-graphql.test.codeblock.add-apollo-client-to-app.jsx
     :language: javascript
     :emphasize-lines: 5, 14-16
