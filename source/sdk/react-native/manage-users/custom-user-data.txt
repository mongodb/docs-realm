.. _react-native-access-custom-user-data:

===================================
Custom User Data - React Native SDK
===================================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

You can read arbitrary data about your application users, known as
custom user data, directly within your React Native application. For example,
you might store a user's preferred language, date of birth, or local
timezone. You can write to the Custom User Data object via a
:ref:`mongoClient <react-native-mongodb-data-access>`.

.. include:: /includes/use-custom-data-note.rst

Write to Custom User Data with a MongoClient
--------------------------------------------

.. include:: /includes/write-access-to-custom-data-note.rst

Using standard CRUD operations through the :ref:`MongoDB Atlas service
<data-sources>`, a user's custom data can be accessed. The following example
updates the user's custom data to alter the user's ``favoriteColor`` to pink.

.. code-block:: javascript
   :emphasize-lines: 3, 16

   // A user must be logged in to use a mongoClient
   const user = await app.logIn(credentials);
   const mongo = user.mongoClient("<atlas service name>");
   const collection = mongo.db("<database name>").collection("<collection name>");

   const filter = {
     userID: user.id, // Query for the user object of the logged in user
   };

   const updateDoc = {
     $set: {
       favoriteColor: "pink", // Set the logged in user's favorite color to pink
     },
   };

   const result = await collection.updateOne(filter, updateDoc);
   console.log(result);

Read Custom User Data
---------------------

.. include:: /includes/custom-data-may-be-stale.rst

If you have updated your custom user data within the last 30 minutes,
use :js-sdk:`User.refreshCustomData() <Realm.User.html#refreshCustomData>`.

.. code-block:: javascript

   const customUserData = await user.refreshCustomData()
   console.log(customUserData);

If you have not recently updated your custom user data, use the user object's :js-sdk:`customData
<Realm.User.html#customData>` field. The ``customData`` field is read only.

.. code-block:: javascript

   const customUserData = user.customData
