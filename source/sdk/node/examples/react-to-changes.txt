.. _node-react-to-changes:

================
React to Changes
================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

.. _node-register-a-realm-change-listener:
.. _node-realm-listener:

Register a Realm Change Listener
--------------------------------

To register a change listener for an entire {+realm+}, pass a callback function
to the realm's :js-sdk:`addListener() <Realm.html#addListener>` method.
{+client-database+} calls the listener asynchronously whenever an operation
adds, changes, or removes objects in the {+realm+}.

To remove a realm listener, pass the callback to the realm's :js-sdk:`removeListener() <Realm.Collection.html#removeListener>` method.

.. tip:: Use Object & Collection Listeners for Change Details
   
   {+client-database+} does not pass any information about what changed to
   {+realm+} listener callback functions. If you need to know more information
   about what changed in an object or collection, use :ref:`object listeners
   <node-object-listener>` and :ref:`collection listeners
   <node-collection-listener>`.

.. tabs-realm-languages::
   
   .. tab::
      :tabid: javascript
      
      .. literalinclude:: /examples/Notifications/RealmNotification.js
         :language: javascript
         :emphasize-lines: 6

.. _node-register-a-collection-change-listener:
.. _node-collection-listener:

Register a Collection Change Listener
-------------------------------------

To register a change listener for a collection of {+service-short+} objects,
pass a callback function to the collection's :js-sdk:`addListener()
<Realm.Collection.html#addListener>` method. {+client-database+} calls the
listener asynchronously when it's registered as well as whenever an operation
adds, changes, or removes objects in the collection.

To remove a collection listener, pass the callback to the collection's :js-sdk:`removeListener() <Realm.Object.html#removeListener>` method.

.. important:: Order Matters
   
   In collection notification handlers, always apply changes in the following
   order: deletions, insertions, then modifications. Handling insertions before
   deletions may result in unexpected behavior.

.. tabs-realm-languages::
   
   .. tab::
      :tabid: javascript
      
      .. literalinclude:: /examples/Notifications/CollectionNotification.js
         :language: javascript
         :emphasize-lines: 26

.. _node-register-an-object-change-listener:
.. _node-object-listener:

Register an Object Change Listener
----------------------------------

To register a change listener on a specific {+service-short+} object, pass a
callback function to the object's :js-sdk:`addListener()
<Realm.Object.html#addListener>` method. {+client-database+} calls the listener
if any of the object's properties change or if someone deletes the object.

To remove an object listener, pass the callback to the object's
:js-sdk:`removeListener() <Realm.html#removeListener>` method.

.. tabs-realm-languages::
   
   .. tab::
      :tabid: javascript
       
       .. literalinclude:: /examples/Notifications/ObjectNotification.js
          :language: javascript
          :emphasize-lines: 13

.. _node-remove-all-change-listeners:

Remove All Change Listeners
---------------------------

To remove **all** listeners on a given realm, object, or collection instance,
call the instance's ``removeAllListeners()`` function:

- :js-sdk:`Realm.removeAllListeners() <Realm.html#removeAllListeners>`
- :js-sdk:`Realm.Collection.removeAllListeners() <Realm.Collection.html#removeAllListeners>`
- :js-sdk:`Realm.Object.removeAllListeners() <Realm.Object.html#removeAllListeners>`

.. tabs-realm-languages::
   
   .. tab::
      :tabid: javascript
      
      .. code-block:: javascript
         
         // Remove all listeners from a realm
         realm.removeAllListeners();
         
         // Remove all listeners from a collection
         dogs.removeAllListeners();
         
         // Remove all listeners from an object
         dog.removeAllListeners();
