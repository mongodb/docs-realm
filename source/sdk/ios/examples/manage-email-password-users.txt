.. _ios-manage-email-password-users:

=====================================
Manage Email/Password Users - iOS SDK
=====================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol


When you have enabled the :ref:`email/password provider
<email-password-authentication>` in your {+app+}, you can register a new
account, confirm an email address, and reset a user's password from
client code.

.. _ios-register-a-new-user-account:

Register a New User Account
---------------------------

.. tabs-realm-languages::

   .. tab::
      :tabid: swift

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.register-email.swift
         :language: swift

   .. tab::
      :tabid: objective-c

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.register-email-objc.m
         :language: objectivec


.. _ios-confirm-a-new-users-email-address:

Confirm a New User's Email Address
----------------------------------

.. tabs-realm-languages::
   
   .. tab::
      :tabid: swift

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.confirm-new-user-email.swift
         :language: swift

   .. tab::
      :tabid: objective-c

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.confirm-new-user-email-objc.m
         :language: objectivec


.. _ios-reset-a-users-password:

Reset a User's Password
-----------------------

To reset a user password in {+sync+}, you can either:

- Send a password reset email
- Run a password reset function

Select your preferred password reset method by going to:

- Your {+app+}
- :guilabel:`Authentication`
- :guilabel:`Authentication Providers`
- :guilabel:`Email/Password` - and press the :guilabel:`EDIT` button

Send a Password Reset Email
~~~~~~~~~~~~~~~~~~~~~~~~~~~

After you configure your {+app+} to :ref:`send a password reset email 
<auth-send-a-password-reset-email>`, you can call ``sendResetPasswordEmail`` 
with the user's email. {+backend+} sends an email to the user containing 
a unique URL. The user must visit this URL within 30 minutes to confirm 
the reset.
 
.. tabs-realm-languages::
   
   .. tab::
      :tabid: swift

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.reset-password.swift
         :language: swift

   .. tab::
      :tabid: objective-c

      .. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.reset-password-objc.m
         :language: objectivec

Run a Password Reset Function
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

When you configure your app to :ref:`run a password reset function 
<auth-run-a-password-reset-function>`, you'll define the function that 
should run when you call ``callResetPasswordFunction()`` from the SDK. 
This function can take a username, a password, and any number of 
additional arguments. You can use these arguments to specify things like 
security question answers or other challenges that the user should pass 
to successfully complete a password reset.

You might prefer to use a custom password reset function when you want to
define your own password reset flows. This might include things like 
sending a custom password reset email from a specific domain, or sending 
password reset messages through a service other than email.

.. seealso::

   For more information on how to define a custom password reset function
   in the {+sync+} backend, including how to structure it and examples 
   of implementing custom flows, see: :ref:`Run a Password Reset Function 
   <auth-run-a-password-reset-function>`.
 
.. literalinclude:: /examples/generated/code/start/ManageEmailPasswordUsers.codeblock.password-reset-function.swift
   :language: swift