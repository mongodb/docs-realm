.. _cpp-crud-update:
.. _cpp-update-realm-objects:

=======================
CRUD - Update - C++ SDK
=======================

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Updates to Realm Objects must occur within write transactions. For
more information about write trasactions, see: :ref:`Write 
Transactions <cpp-write-transactions>`.

Update an Object
----------------

You can modify properties of a Realm object inside of a write transaction.

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-update-an-object.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/crud.snippet.update-an-object.cpp
         :language: cpp

**Model**

This example uses the following model:

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-single-object-model.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/crud.snippet.single-object-model.cpp
         :language: cpp

Update an Embedded Object Property
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

To update a property in an embedded object, modify the property in a
write transaction.

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-update-embedded-object.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.update-embedded-object.cpp
         :language: cpp

**Model**

This example uses the following model:

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-model-with-embedded-object.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.model-with-embedded-object.cpp
         :language: cpp

Overwrite an Embedded Object Property
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. tabs::

   .. tab:: Current
      :tabid: current

      To overwrite an embedded object, reassign the embedded object property
      to the raw pointer of a new instance in a write transaction.

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-overwrite-embedded-object.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      To overwrite an embedded object, reassign the embedded object property
      to a new instance in a write transaction.

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.overwrite-embedded-object.cpp
         :language: cpp

**Model**

This example uses the following model:

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-update-embedded-object.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.update-embedded-object.cpp
         :language: cpp

.. _cpp-update-inverse-relationship:

Update an Inverse Relationship
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. versionadded:: 0.2.0

You can't update an inverse relationship property directly. Instead, an 
inverse relationship automatically updates by changing assignment through 
its relevant related object.

In this example, a ``Person`` object has a to-one relationship to a 
``Dog`` object, and ``Dog`` has an inverse relationship to ``Person``. The 
inverse relationship automatically updates when the ``Person`` object updates 
its ``Dog`` relationship.

.. literalinclude:: /examples/generated/cpp/relationships.snippet.beta-update-inverse-relationship.cpp
   :language: cpp

.. include:: /includes/tip-cpp-beta-experimental-features.rst

**Model**

This example uses the following model:

.. literalinclude:: /examples/generated/cpp/relationships.snippet.beta-define-inverse-relationship.cpp
   :language: cpp

.. include:: /includes/tip-cpp-beta-experimental-features.rst

.. _cpp-update-map:

Update a Map Property
~~~~~~~~~~~~~~~~~~~~~

You can update a realm :cpp-sdk:`map property
<classrealm_1_1persisted__map__base.html>` 
as you would a standard C++ `map <https://en.cppreference.com/w/cpp/container/map>`__:

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-update-map-value.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.update-map-value.cpp
         :language: cpp

**Model**

This example uses the following model:

.. tabs::

   .. tab:: Current
      :tabid: current

      .. literalinclude:: /examples/generated/cpp/crud.snippet.beta-model-with-map-property.cpp
         :language: cpp

      .. include:: /includes/tip-cpp-beta-experimental-features.rst

   .. tab:: Deprecated
      :tabid: deprecated

      .. literalinclude:: /examples/generated/cpp/define-object-model.snippet.model-with-map-property.cpp
         :language: cpp

.. _cpp-update-set:

Update a Set Property
~~~~~~~~~~~~~~~~~~~~~

.. versionadded:: v0.4.0-preview

You can update a :cpp-sdk:`set property
<structrealm_1_1experimental_1_1managed_3_01std_1_1set_3_01T_01_5_01_4_01_4.html>`
in a write transaction. You can ``.insert()`` elements into the set, ``erase()``
elements from a set, or use ``std::set`` algorithms to mutate sets:

- `std::set_union <https://en.cppreference.com/w/cpp/algorithm/set_union>`__
- `std::set_intersection <https://en.cppreference.com/w/cpp/algorithm/set_intersection>`__
- `std::set_difference <https://en.cppreference.com/w/cpp/algorithm/set_difference>`__
- `std::set_symmetric_difference <https://en.cppreference.com/w/cpp/algorithm/set_symmetric_difference>`__

.. literalinclude:: /examples/generated/cpp/crud.snippet.update-set.cpp
   :language: cpp

.. include:: /includes/tip-cpp-beta-experimental-features.rst

**Model**

This example uses the following model:

.. literalinclude:: /examples/generated/cpp/crud.snippet.beta-model-with-set-property.cpp
   :language: cpp

.. include:: /includes/tip-cpp-beta-experimental-features.rst
