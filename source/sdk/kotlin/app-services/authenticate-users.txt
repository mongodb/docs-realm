.. _kotlin-authenticate:
.. _kotlin-authenticate-users:

===============================
Authenticate Users - Kotlin SDK
===============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

{+service+} provides an API for authenticating users using any enabled
authentication provider. Instantiate a ``Credentials`` object and pass
it to :kotlin-sdk:`app.login()
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-app/login.html>`
method to authenticate a user and create a :kotlin-sdk:`User
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-user/index.html>`
object for that user.
Each authentication provider corresponds to a
:kotlin-sdk:`static helper method
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-authentication-provider/index.html>`used to instantiate ``Credentials`` objects for that
authentication provider.

.. _kotlin-login:

Log In
------

You can authenticate users with :kotlin-sdk:`app.login()
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-app/login.html>`.

If successful, ``app.login()`` returns a ``User`` object.
In the event of a failure, ``app.login()`` throws an
exception of type :kotlin-sdk:`AppException
<library-sync/io.realm.mongodb/-app-exception/index.html>`.

.. _kotlin-anonymous-login:
.. _kotlin-login-anonymous:

Anonymous User
~~~~~~~~~~~~~~

The :doc:`anonymous authentication provider </authentication/anonymous>`
enables users to log in to your application with short-term accounts
that store no persistent personal information. To log in with anonymous
authentication, create an anonymous credential by calling
:kotlin-sdk:`AuthenticationProvider.ANONYMOUS()
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-authentication-provider/-a-n-o-n-y-m-o-u-s/index.html>`
and then pass the generated credential to
``app.login()``.

.. literalinclude:: /examples/generated/kotlin/sync/Greeting.codeblock.anonymous-authentication.kt
   :language: kotlin

.. _kotlin-email-password-login:
.. _kotlin-login-email-password:

Email/Password User
~~~~~~~~~~~~~~~~~~~

The :doc:`Email/Password authentication provider </authentication/email-password>`
enables users to log in to your application with an email username and
a password. To log in with email/password authentication, create an
email/password credential by calling :kotlin-sdk:`AuthenticationProvider.EMAIL_PROVIDER()
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-authentication-provider/-e-m-a-i-l_-p-a-s-s-w-o-r-d/index.html>`
with the user's email and password. Then pass the generated credential
to ``app.login()``.

.. literalinclude:: /examples/generated/kotlin/sync/Greeting.codeblock.email-password-authentication.kt
   :language: kotlin

.. _kotlin-logout:

Log a User Out
--------------

You can log out any user, regardless of the authentication provider used
to log in, using :kotlin-sdk:`user.logOut()
<library-sync/-realm%20-kotlin%20-multiplatform%20-s-d-k%20-%20-sync/io.realm.mongodb/-user/log-out.html>`. This method:

- deletes locally stored user credentials from the device

- immediately halts any synchronization to and from the user's {+realm+}s

Because logging out halts synchronization, you should only log out after
all local Realm updates have uploaded to the server.

.. literalinclude:: /examples/generated/kotlin/sync/Greeting.codeblock.log-out.kt
   :language: kotlin
