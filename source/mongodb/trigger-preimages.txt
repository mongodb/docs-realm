.. _trigger-preimages:

=======================================
View & Disable Trigger Preimages (Beta)
=======================================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

When document preimages are enabled for a :ref:`database trigger
<database-trigger>`, Realm includes additional information in the underlying
collection's :manual:`oplog </core/replica-set-oplog>`. This adds a small cost
to each operation on the collection and may cause performance issues for
collections with a high write throughput. Once you've enabled preimages for a
collection, any trigger on the collection may include document preimages at no
additional cost.

.. tip::

   For information on how to enable document preimages for a specific trigger,
   see :ref:`Create a Database Trigger <create-a-database-trigger>`.

View Preimage-Enabled Collections
---------------------------------

To see a list of collections that are configured to store document preimages in
their oplog, navigate to the :guilabel:`Linked Data Source` configuration screen
and find the :guilabel:`Preimage Preferences by Collection` table.

The table lists every collection that stores preimages in the oplog. This
includes all collections in the linked cluster, even if no triggers currently
use the preimages for a collection or if the triggers are in a different Realm
app.

Disable Preimages for a Collection
----------------------------------

To disable preimages for a collection, find the collection in the
:guilabel:`Preimage Preferences by Collection` table and click
:guilabel:`Disable`. When disabled, the collection's oplog no longer includes
preimages. Triggers on the collection that have preimages enabled (including
triggers in other Realm apps) will continue to execute but the
``fullDocumentBeforeChange`` field of change events will be ``undefined``.
