=====================
Define a Realm Schema
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

You can create a :manual:`Data Model </data-modeling/>`. to define the
structure of the data you are storing in your database. Setting a data
model is a useful technique to enforce document validation on your
collection. Although MongoDB and Realm are both object centric, there
are differences between their data models, such as the structuring of
relationships, supported types, etc.

This guide teaches how to define a Data Model using MongoDB Realm. If
you currently have data in `MongoDB Atlas
<http://www.mongodb.com/cloud/atlas/>`_, you will learn how to
translate this data into a Data Model suitable for Realm mobile
development. If you do not have data in Atlas, you will learn how to use
``Schema Development Mode`` to create a schema for Atlas so that you can
take your mobile application to production. 


Starting with Data in MongoDB
-----------------------------
You can create a Data Model for Realm if you already have data in
MongoDB Atlas. Through the MongoDB Realm UI you can sample the data in
your collection to automatically generate a schema. Then you can edit
that schema, and translate it into a Realm Data Model for the language
of your choice. 

Procedure
~~~~~~~~~

#. Sign up for Atlas and create a cluster
#. Create a MongoDB Realm application
#. Navigate to the SDKs to link your MongoDB Realm application to your Atlas Cluster
#. In the ``rules`` section, click "Generate Schema" to automatically create a JSON Schema based on your cluster data

   .. figure:: /images/generate-schema-based-on-cluster-data.png
      :width: 750px
      :lightbox:

#. Edit your JSON Schema

   .. figure:: /images/edit-schema-based-on-cluster-data.png
      :width: 750px
      :lightbox:

#. In the SDKs tab, view your JSON Schema as a Realm Data Model in your language of choice

   .. figure:: /images/translate-jsonschema-into-realm-data-model.png
      :width: 750px
      :lightbox:

#. Click ``View all Schema Errors`` to see the errors & warnings from translating your schema into a data model

   .. figure:: /images/schema-translation-errors-warnings.png
      :width: 750px
      :lightbox:

Starting with your application using 'Schema Development Mode'
--------------------------------------------------------------
You can create a schema suitable for MongoDB Atlas so that you can take
your application to production. Through ``Schema Development Mode`` in
the MongoDB Realm UI, you can develop your data model. After developing
your data model, MongoDB will automatically generate a schema for your
Atlas cluster. 

Procedure
~~~~~~~~~

#. Sign up for Atlas and create a cluster
#. Create a MongoDB Realm application
#. Navigate to the SDKs to link your MongoDB Realm application to your Atlas Cluster
#. Enable "Schema Development Mode automatically by navigating to the SDKs page

   .. figure:: /images/enable-schema-development-mode.png
      :width: 750px
      :lightbox:

#. Create a Data Model in the language of your choice with the Realm Client SDKs

   .. figure:: /images/define-your-data-models.png
      :width: 750px
      :lightbox:

#. Alter Validation Settings in the ``Sync`` tab

   .. figure:: /images/alter-validation-settings.png
      :width: 750px
      :lightbox:
      
#. Click Save
#. A modal will appear, click ``View my JSON Schema`` to view your generated schema for Atlas

   .. figure:: /images/view-my-json-schema.png
      :width: 461px
      :lightbox:
      
Summary
-------
- If you already have application data stored in MongoDB Atlas, you can translate your automatically generated document schema into a Data Model to use for your Realm Mobile Application.
- If you want to take your Realm app to production but do not already have application data stored in MongoDB Atlas you can activate ``Schema Development Mode`` in the MongoDB Realm UI. This will allow you to develop your data model and have it automatically translated into a schema for Atlas. 