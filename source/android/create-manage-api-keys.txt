.. _android-create-manage-api-keys:

=============================
Create & Manage User API Keys
=============================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

User API keys are generated for specific application users by the client
SDKs. You can allow devices or services to communicate with {+service+}
on behalf of a user by associating a unique user API key with each
device or service.

User API keys are always associated with a user object created by another
non-anonymous authentication provider. Each user can associate up to 20
user keys with their account.

.. note::

   User API keys are not the same as **server API keys**, which allow a
   user or service to directly authenticate with {+service+} using the
   :ref:`API Key authentication provider <android-login-api-key>`. To learn
   more about server API keys, see :ref:`API Key Authentication
   <api-key-authentication>`.

.. _android-api-key-create-user-key:

Create a User API Key
---------------------

To create a new user API key, call the ``createApiKey()`` or
``createApiKeyAsync()`` methods of a logged in user's ``apiKeyAuth``
instance. The user API key will be associated with the logged in user
and can be used to interact with {+service+} on their behalf. You cannot
create user API keys for anonymous users.

.. include:: /includes/note-store-user-api-key-value.rst

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.create-a-user-api-key.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.create-a-user-api-key.java
         :language: java

.. _android-api-key-look-up-user-key:

Look up a User's API Keys
-------------------------

To get a list of all user API keys associated with the logged in user,
call the ``fetchApiKeys()`` or ``fetchApiKeysAsync()`` methods of a
logged in user's ``apiKeyAuth`` instance.

.. include:: /includes/note-store-user-api-key-value.rst

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.look-up-a-users-api-keys.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.look-up-a-users-api-keys.java
         :language: java

To look up a specific user API key for the logged in user, pass the
key's id to the ``fetchApiKey`` or ``fetchApiKeyAsync`` methods.

.. include:: /includes/note-store-user-api-key-value.rst

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.look-up-a-specific-user-api-key.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.look-up-a-specific-user-api-key.java
         :language: java

.. _android-api-key-enable-disable:
.. _android-api-key-disable:

Disable a User API Key
----------------------

To disable a specific user API key without deleting it, pass the
key's id to the  ``disableApiKey()`` or ``disableApiKeyAsync()`` methods
of a logged in user's ``apiKeyAuth`` instance.

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.disable-user-api-key.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.disable-user-api-key.java
         :language: java

.. _android-api-key-enable:

Enable a User API Key
---------------------

To enable a specific user API key that was previously disabled, pass the
key's id to the ``enableApiKey()`` or ``enableApiKeyAsync()`` methods of
a logged in user's ``apiKeyAuth`` instance.

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.enable-user-api-key.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.enable-user-api-key.java
         :language: java

.. _android-api-key-delete:

Delete a User API Key
---------------------

To permanently remove a specific user API key, pass the
key's id to the ``deleteApiKey()`` or ``deleteApiKeyAsync()`` methods of
a logged in user's ``apiKeyAuth`` instance.

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.delete-user-api-key.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/UserAPIKeysTest.codeblock.delete-user-api-key.java
         :language: java
