.. _android-manage-email-password-users:

===========================
Manage Email/Password Users
===========================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

When you have enabled the :ref:`email/password provider
<email-password-authentication>` in your {+app+}, you can register a new
account, confirm an email address, and reset a user's password from
client code.

.. _android-email-password-register-new-user:

Register a New User Account
---------------------------

To register a new user, pass a user-provided email and password to the
``registerUser()`` or ``registerUserAsync()`` methods of your
{+service-short+} ``App``'s ``EmailPasswordAuth`` instance:

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.register-a-new-user-account.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.register-a-new-user-account.java
         :language: java

.. _android-email-password-confirm-user:

Confirm a New User's Email Address
----------------------------------

To confirm a newly-created user, pass a confirmation ``token`` and
``tokenId`` to the ``confirmUser()`` or ``confirmUserAsync`` methods of
your {+service-short+} ``App``'s ``EmailPasswordAuth`` instance:

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.confirm-a-new-users-email-address.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.confirm-a-new-users-email-address.java
         :language: java

.. note::

   To access the ``token`` and ``tokenId`` values sent in the user
   confirmation email, you can use a :ref:`custom confirmation email subject
   <auth-send-a-confirmation-email>` containing a `deep link
   <https://developer.android.com/training/app-links/deep-linking>`__.

.. _android-email-password-reset-password:

Reset a User's Password
-----------------------

To reset a user's password, first send the user a password reset email:

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.send-reset-password-email.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.send-reset-password-email.java
         :language: java

Password reset emails contain two values, ``token`` and ``tokenId``.
To complete the password reset flow, prompt the user to enter a new
password and pass the ``token`` and ``tokenId`` values along with the
new password value to your {+service-short+} ``App``'s
``EmailPasswordAuth`` instance's ``resetPassword()`` or ``resetPasswordAsync()``
methods:

.. tabs-realm-languages::
   
   .. tab::
       :tabid: kotlin

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.reset-password.kt
         :language: kotlin

   .. tab::
       :tabid: java

       .. literalinclude:: /examples/generated/android/code/start/ManageEmailPasswordTest.codeblock.reset-password.java
         :language: java

.. note::

   To access the ``token`` and ``tokenId`` values sent in the password
   reset email, you can use a :ref:`custom password reset email subject
   <auth-send-a-password-reset-email>` containing a `deep link
   <https://developer.android.com/training/app-links/deep-linking>`__.
